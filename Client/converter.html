<!DOCTYPE html>
<html lang="it">
<head>
	<meta author="Michele Anselmi, Gianmarco Cariggi, Riccardo Ceccarelli">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta charset="utf-8">

	<!-- GOOGLE META -->
	<meta name="google-signin-client_id" content="994040047931-8gd198l125ri5pahsrrgarbl5fhqsdje.apps.googleusercontent.com">

	<title>MyFile | Converter</title>

	<!-- Import Google Icon Font -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Import jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <!-- RALEWAY FONT -->
  	<link href="https://fonts.googleapis.com/css?family=Raleway:600" rel="stylesheet">
    <!-- Favicon -->
    <link rel='shortcut icon' type='image/x-icon' href='img/favicon.png' />
    <!-- FontAwesome -->
    <script src="https://use.fontawesome.com/c761b0c982.js"></script>
     <!-- Google API -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://apis.google.com/js/client:platform.js" async defer></script>


    <!-- Our CSS/JS -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
	<script type="text/javascript" src="js/scripts.js"></script>

	<!-- Import Materialize Library from CDNs -->
	<!--
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  	-->


  	<script type="text/javascript" src="materialize/js/materialize.min.js"></script>
  	<link rel="stylesheet" type="text/css" href="materialize/css/materialize.min.css">
</head>
<body>
	<div class="navbar-fixed">
		<nav>
			<div class="nav-wrapper">
				<a href="index.html" class="brand-logo"><img src="img/logo-file-256x256.png" class="responsive" height="100%" width="50%" alt=""></a>
				<ul class="right hide-on-med-and-down">
					<li class="profile_name_li" style="visibility: hidden; display: none;"></li>
					<li class="profile_image_li" style="visibility: hidden; display: none;"></li>
					<li><a href="index.html">MyFile</a></li>
					<li><a href="#">Converti File</a></li>
					<li><a href="team.html">Il nostro team</a></li>
					<li class="login_li"><a href="login.html">Login</a></li>
					<li class="logout_li" style="visibility: hidden; display: none;"><a href="#" onclick="signOut();">Sign out</a></li>
				</ul>
			</div>
		</nav>
	</div>

	<h1 class="center">Converti il tuo file</h1>

	<div class="main_container">
		<div class="container">
			<form class="form_container" method="GET" action="http://127.0.0.1:8080/convert" name="convertion_body">
				<div class="file-field input-field">
					<div class="btn">
						<span>File</span>
						<input type="hidden" id="pathfile" name="pathfile">
						<input type="file" id="inputfile" name="inputfile">
					</div>
					<div class="file-path-wrapper">
						<input class="file-path validate" type="text" id="filename" name="filename">
						<input type="hidden" name="inputformat" id="inputformat">
					</div>
				</div>
				<div class="input-field col s12 m6">
					<select class="icons" name="outputformat" id="outputformat">
						<option value="pdf" data-icon="img/carousel/pdf_carousel.png" class="left circle">PDF</option>
						<option value="xls" data-icon="img/carousel/excel_carousel.png" class="left circle">File Excel</option>
						<option value="doc" data-icon="img/carousel/word_carousel.png" class="left circle">File Word</option>
						<option value="png" data-icon="img/carousel/png_carousel.png" class="left circle">PNG</option>
						<option value="jpg" data-icon="img/carousel/jpg_carousel.png" class="left circle">JPEG</option>
					</select>
					<label>Converti in</label>
				</div>
				<div class="input-field col s12 m6" style="text-align: center !important;">
					<button class="btn waves-effect waves-light" name="submit" onclick="">Converti
						<i class="fa fa-file" aria-hidden="true"></i>
					</button>
				</div>
				<div class="g-signin2" style="visibility: hidden;" data-onsuccess="onSignIn"></div>
				<br><br><br><br><br>
			</form>
		</div>
	</div>

	<div class="page-footer">
    	<div class="container">
			<div class="row">
				<div class="col l6 s12">
					<h5 class="white-text">MyFile</h5>
						<p class="grey-text text-lighten-4">Your favorite online file converter!</p>
              	</div>
			</div>
			<div class="row">
              	<div class="col l4 offset-l2 s12">
                	<h5 class="white-text">Link utili</h5>
                	<ul>
	                	<li><a class="text-lighten-3 facebook-link" href="https://www.facebook.com/"><i class="fa fa-facebook-official" aria-hidden="true"></i> Facebook</a></li>
	                	<li><a class="text-lighten-3 google-plus-link" href="https://plus.google.com/"><i class="fa fa-google-plus-official" aria-hidden="true"></i> Google Plus</a></li>
	                	<li><a class="text-lighten-3 twitter-link" href="https://twitter.com/"><i class="fa fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
	                	<li><a class="text-lighten-3 linkedin-link" href="https://it.linkedin.com/"><i class="fa fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
                	</ul>
              	</div>
            </div>
		</div>
		<div class="footer-copyright">
			<div class="container">
				Â© 2018 Copyright MyFile - <a href="https://github.com/Mikyxello">M. Anselmi</a> / <a href="https://github.com/ricciricciard">R. Ceccarelli</a> / <a href="https://github.com/giacar">G. Cariggi</a>
            </div>
		</div>
    </div>

    <script>
		$(document).ready(function() {
			$('select').material_select();

			$("#filename").on("change", function() {
				$("#inputformat").val($("#filename").val().split('.').pop());
			});

			$('#inputfile').on("change", function(event) {
				var pathfile = URL.createObjectURL(event.target.files[0]);
				$("#pathfile").val(pathfile);
			});
		});
	</script>

	<script>
		function onSignIn(googleUser) {
			var profile = googleUser.getBasicProfile();
			console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
			var user = profile.getName();
			var image = profile.getImageUrl();
			var mail = profile.getEmail(); // This is null if the 'email' scope is not present.

			$(".login_li, .g-signin2").css({"display":"none", "visibility":"hidden"});
			$(".profile_image_li").html("<img src=\""+image+"\" height=\"60px\" width=\"60px\"> ");
			$(".profile_name_li").html(user + " ");
			$(".logout_li, .profile_name_li, .profile_image_li").css({"display":"", "visibility":""});

			$(".user_image").html("<img src=\""+image+"\">");
			$(".user_name").html(user);
			$(".user_email").html("<a href=\""+mail+"\">" + mail + "</a>");
		}
				
		function signOut() {
			var auth2 = gapi.auth2.getAuthInstance();
			auth2.signOut().then(function () {
				console.log('User signed out.');
			});
				$(".login_li").css({"display":"", "visibility":""});
			    $(".logout_li, .profile_image_li, .profile_name_li").css({"display":"none", "visibility":"visible"});
		}
	</script>
	
</body>
</html>
